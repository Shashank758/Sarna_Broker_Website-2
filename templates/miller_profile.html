<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Miller Profile | Sarna Broker</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
  background:#f1f4f8;
  font-family:"Segoe UI", sans-serif;
}

/* HEADER */
.profile-header{
  background:#1e7e34;
  color:#fff;
  padding:16px 20px;
  border-radius:8px;
  margin-top:25px;
  margin-bottom:25px;
}
.profile-header h4{
  margin:0;
  font-weight:600;
}
.profile-header small{
  opacity:.9;
}

/* CARD */
.profile-card{
  background:#fff;
  border-radius:10px;
  padding:25px;
  box-shadow:0 2px 10px rgba(0,0,0,.06);
}

/* FORM */
.form-label{
  font-weight:600;
  font-size:14px;
}

/* DOCUMENT */
.doc-box{
  border:2px dashed #cfd8dc;
  padding:15px;
  border-radius:8px;
  text-align:center;
  background:#fafafa;
}

/* BUTTON */
.btn-save{
  background:#1e7e34;
  color:#fff;
}
.btn-save:hover{
  background:#19692c;
  color:#fff;
}
</style>
</head>

<body class="container mb-5">

  {% if session.is_staff %}
  <div class="alert alert-danger">
    Staff members cannot edit miller profile.
  </div>
  {% endif %}
  
<!-- ================= HEADER ================= -->
<div class="profile-header">
  <h4><i class="fa fa-user-check"></i> Miller Profile & Verification</h4>
  <small>Complete your profile for smooth mandi trading approval</small>
</div>

<!-- ================= PROFILE FORM ================= -->
<div class="profile-card">

    <form method="POST" enctype="multipart/form-data" class="card p-4 shadow-sm">

        <!-- MILL NAME -->
        <label class="form-label">Mill / Firm Name</label>
        <input class="form-control mb-2" name="mill_name"
               value="{{ profile[2] if profile else '' }}" required>
      
        <!-- OWNER PHONE -->
        <label class="form-label">Owner Mobile Number</label>
        <input class="form-control mb-2" name="owner_phone"
               value="{{ profile[7] if profile else '' }}" required>
      
        <!-- ACCOUNTANT PHONE -->
        <label class="form-label">Accountant Mobile Number</label>
        <input class="form-control mb-2" name="accountant_phone"
               value="{{ profile[8] if profile else '' }}">
      
        <!-- STAFF PHONE -->
        <label class="form-label">Staff Mobile Number</label>
        <input class="form-control mb-2" name="staff_phone"
               value="{{ profile[9] if profile else '' }}">
      
        <!-- ADDRESS -->
        <label class="form-label">Complete Address</label>
        <textarea class="form-control mb-3" name="address" required>
      {{ profile[4] if profile else '' }}
      </textarea>
      
        <!-- GST DOC -->
        <label class="form-label">GST Certificate</label>
        {% if profile and profile[10] %}
          <div class="alert alert-success mb-2">
            <i class="fa fa-check-circle"></i> Document uploaded: 
            <a href="{{ url_for('static', filename='uploads/miller_docs/' + profile[10]) }}" target="_blank" class="text-decoration-none">
              {{ profile[10] }}
            </a>
          </div>
        {% else %}
          <div class="alert alert-warning mb-2">
            <i class="fa fa-exclamation-circle"></i> No document uploaded yet
          </div>
        {% endif %}
        <input type="file" class="form-control mb-2" name="gst_doc" accept="image/*,.pdf">
      
        <!-- MANDI DOC -->
        <label class="form-label">Mandi License</label>
        {% if profile and profile[11] %}
          <div class="alert alert-success mb-2">
            <i class="fa fa-check-circle"></i> Document uploaded: 
            <a href="{{ url_for('static', filename='uploads/miller_docs/' + profile[11]) }}" target="_blank" class="text-decoration-none">
              {{ profile[11] }}
            </a>
          </div>
        {% else %}
          <div class="alert alert-warning mb-2">
            <i class="fa fa-exclamation-circle"></i> No document uploaded yet
          </div>
        {% endif %}
        <input type="file" class="form-control mb-2" name="mandi_doc" accept="image/*,.pdf">
      
        <!-- OTHER DOC -->
        <label class="form-label">Other Document</label>
        {% if profile and profile[12] %}
          <div class="alert alert-success mb-2">
            <i class="fa fa-check-circle"></i> Document uploaded: 
            <a href="{{ url_for('static', filename='uploads/miller_docs/' + profile[12]) }}" target="_blank" class="text-decoration-none">
              {{ profile[12] }}
            </a>
          </div>
        {% else %}
          <div class="alert alert-warning mb-2">
            <i class="fa fa-exclamation-circle"></i> No document uploaded yet
          </div>
        {% endif %}
        <input type="file" class="form-control mb-3" name="other_doc" accept="image/*,.pdf">
      
        <button class="btn btn-success w-100">
          Save Profile
        </button>
      </form>
      <hr class="my-4">

<h5>ðŸ‘· Create Staff Account</h5>

<form method="POST" action="/miller/create_staff" class="row g-3">

  <div class="col-md-4">
    <input class="form-control"
           name="name"
           placeholder="Staff Name"
           required>
  </div>

  <div class="col-md-4">
    <input class="form-control"
           name="email"
           type="email"
           placeholder="Staff Email"
           required>
  </div>

  <div class="col-md-4">
    <input class="form-control"
           name="password"
           type="password"
           placeholder="Password"
           required>
  </div>

  <div class="col-12">
    <button class="btn btn-success">
      âž• Create Staff
    </button>
  </div>

</form>

</div>

</body>
</html>
